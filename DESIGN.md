# Noteライクな雑記ブログの設計図

note.comを参考にしたデザインの個人向け雑記ブログ。
左サイドバーにプロフィール、右にカード型の記事一覧を配置する2カラムレイアウト。
レスポンシブWebデザインにより、PC・タブレット・スマートフォンのどの画面でも快適に読める。
フレームワークやビルドツールは使わない（Sanity Studio管理を除く）。

---

## 技術構成

| 要素 | 採用技術 | 理由 |
|------|---------|------|
| 構造 | HTML5 | フレームワーク不要、シンプルに保つ |
| 装飾 | Vanilla CSS | media queryでレスポンシブを実現する |
| 記事の管理 | Sanity CMS | ブラウザ上の管理画面（Studio）で記事を書ける |
| データ取得 | Sanity API (GROQ) | `main.js` から直接データを取得する |
| 本文レンダリング | Portable Text → HTML | `main.js` 内の変換ロジックで表示する |
| フォント | Noto Sans JP（Google Fonts） | 日本語の読みやすさを確保する |
| ホスティング | Netlify | GitHubにpushするだけで公開される |

Node.jsビルドツールはフロントエンドでは使用しない。Sanity Studioの管理にのみNode.js（npm/pnpm）を使用する。

---

## 画面構成

ブログは2つの画面で構成する。プロフィール情報はサイドバーに統合しているため、独立したプロフィールページは設けない。

### トップページ（index.html）

note.com風の2カラムレイアウト。

左サイドバーにプロフィール情報（アバター画像、名前、自己紹介文、フォローボタン）を表示する。
右のメインエリアにはタブUI（新着／人気）とカード型の記事一覧を配置する。
各カードにはカバー画像のサムネイル、記事タイトル、著者情報、日付、いいね数を表示する。
カードは2列のグリッドで並び、最新の記事が左上にくる。

記事一覧は Sanity API (GROQ) を `main.js` で呼び出して描画する。

### 記事ページ（post.html）

note.com風の記事表示ページ。

左サイドバーにプロフィール情報を表示する（トップページと同じ）。
右のメインエリアにカバー画像を大きく表示し、その下にタイトルと日付、本文を配置する。
本文の横幅は720px程度に制限する。
URLのクエリパラメータ（?slug=スラッグ名）で対象の記事を特定し、Sanity から取得したデータを HTML に変換して表示する。

本文の下にいいねボタン（ハートアイコン）を配置する。いいねの状態はlocalStorageで保持する。
さらにその下に著者情報（アバター、名前、日付）を表示する。

---

## 記事の書き方

記事は Sanity Studio（ブラウザ上の管理画面）で作成・編集する。

1. `studio/` フォルダで `npm run dev` を実行して Studio を起動する（またはデプロイ先のURLを開く）
2. 「記事」メニューから「新規作成」を行い、タイトル・スラッグ・日付・カバー画像・本文を入力する
3. 「Publish」ボタンを押して公開する
4. フロントエンド（`index.html`）に自動的に反映される

---

## フォルダ構成

```
brog-traial/
├── index.html              ← トップページ
├── post.html               ← 記事表示ページ
├── css/
│   └── style.css           ← style定義
├── js/
│   └── main.js             ← Sanity API 連携・表示ロジック
├── studio/                 ← Sanity Studio (CMS)
│   ├── schemaTypes/
│   │   └── post.js         ← 記事スキーマ定義
│   └── sanity.config.js    ← プロジェクトID設定など
├── content/                ← 旧Markdown記事（バックアップ）
├── images/                 ← 旧ローカル画像（バックアップ）
├── tools/
│   └── remove-exif.ps1     ← 画像Exif削除ツール（Sanity移行後は任意）
└── DESIGN.md               ← この設計図
```

---

## デザイン方針

note.comの見た目を参考にしたデザイン。

| 項目 | 値 |
|------|-----|
| ページ背景色 | 薄いグレー (#f8f8f8) |
| カード・サイドバー背景色 | 白 (#ffffff) |
| 文字色 | 濃いグレー (#333333) |
| 本文フォント | Noto Sans JP |
| 本文サイズ | 16px（モバイル15px） |
| 記事本文の最大幅 | 720px |
| 行間 | 1.8〜2.0 |
| アクセントカラー | いいねのピンク (#e8467f) |
| カード角丸 | 8px |
| レイアウト | 2カラム（左260pxサイドバー＋右メインコンテンツ） |
| 全体の雰囲気 | note.comに近い、カード型の現代的なデザイン |

### レスポンシブ対応

| 画面幅 | 調整内容 |
|--------|---------|
| 961px以上 | 2カラム（サイドバー＋メイン）、カード2列グリッド |
| 641px〜960px | 1カラム（サイドバーは横並びのコンパクト表示）、カード2列 |
| 640px以下 | 1カラム、カード1列、フォントサイズ15px |

---

## セキュリティ

この構成は静的サイトであり、サーバー側の処理やデータベースを持たないため、攻撃対象がほぼ存在しない。以下は初心者が公開前に確認しておくべき項目。

### 1. APIキーや秘密情報は一切コードに書かない
Sanity の読み取り専用 API ID は公開されるが、書き込み権限はないため安全。

### 2. .gitignore の設定
```
.DS_Store
Thumbs.db
.vscode/
drafts/
node_modules/
.env
.env.local
```

### 3. 画像のメタデータ
スマートフォンの写真にはGPS座標が含まれていることがある。Sanity 側でも設定可能だが、アップロード前に削除を推奨。

### 4. 外部から読み込むファイルの安全性
Google Fonts など信頼できる CDN のみを使用。

### 5. 外部入力をHTMLに直接挿入しない
Sanity のリッチテキスト（Portable Text）から HTML への変換時にはエスケープ処理を適用している。

---

## 将来の拡張

- アフィリエイトリンクの挿入（記事内に直接記述）
- カテゴリやタグでの記事分類ページ
- OGP画像の自動生成
